[DEFAULT]
{% if triliovault_backup_target == "nfs" %}

vault_storage_type = nfs
vault_storage_nfs_export = {{ nfs_shares }}
vault_storage_nfs_options = {{ nfs_options }}

{% elif triliovault_backup_target == "amazon_s3" %}

vault_storage_type = s3
vault_storage_nfs_export = TrilioVault
vault_s3_auth_version = DEFAULT
vault_s3_access_key_id = {{ triliovault_s3_access_key }}
vault_s3_secret_access_key = {{ triliovault_s3_secret_key }}
vault_s3_region_name = {{ triliovault_s3_region_name }}
vault_s3_bucket = {{ triliovault_s3_bucket_name }}
vault_s3_ssl_cert = {{ triliovault_s3_ssl_cert_file_path }}

{% elif triliovault_backup_target == "ceph_s3" %}

vault_storage_type = s3
vault_storage_nfs_export = TrilioVault
vault_s3_auth_version = DEFAULT
vault_s3_access_key_id = {{ triliovault_s3_access_key }}
vault_s3_secret_access_key = {{ triliovault_s3_secret_key }}
vault_s3_region_name = {{ triliovault_s3_region_name }}
vault_s3_bucket = {{ triliovault_s3_bucket_name }}
vault_s3_endpoint_url = {{ triliovault_s3_endpoint_url }}
vault_s3_ssl = {{ triliovault_s3_ssl_enabled }}
vault_s3_ssl_cert = {{ triliovault_s3_ssl_cert_file_path }}

{% endif %}

vault_data_directory_old = /var/triliovault
vault_data_directory = /var/triliovault-mounts
log_file = /var/log/kolla/triliovault-datamover/tvault-contego.log
debug = False
verbose = True
max_uploads_pending = 3
max_commit_pending = 3

[contego_sys_admin]
helper_command = sudo /usr/bin/privsep-helper

{% if triliovault_backup_target == "ceph_s3" or triliovault_backup_target == "amazon_s3" %}

[s3fuse_sys_admin]
helper_command = sudo /usr/bin/privsep-helper

{% endif %}

[conductor]
use_local = True